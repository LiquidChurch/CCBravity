var gfRepeater_debug=true;var gfRepeater_repeaters={};var gfRepeater_page=gf_repeater_js_admin_strings.page;function gfRepeater_editforms_getRepeaters(){var e=0;var a=0;var c=[];var b=[];var d;jQuery(".gfield").each(function(){if(e==0){if(jQuery(this).has(".gf-repeater-start").length){a+=1;if(gfRepeater_debug){console.log("Repeater #"+a+" - Start: "+jQuery(this).attr("id"))}d=this.id;e=1}}else{if(jQuery(this).has(".gf-repeater-start").length){return false}if(jQuery(this).has(".gf-repeater-end").length){if(gfRepeater_debug){console.log("Repeater #"+a+" - End: "+jQuery(this).attr("id"))}gfRepeater_repeaters[a]={startId:d,childrenIds:b,children:c};c=[];b=[];e=0}else{c.push(this);b.push(this.id);if(gfRepeater_debug){console.log("Repeater #"+a+" - Child #"+c.length+" - Found: "+this.id)}}}});if(e!==0){return false}return true}function gfRepeater_getId(a){return a.substr(6)}function gfRepeater_getField(b){var a=gfRepeater_getId(b);return GetFieldById(a)}function gfRepeater_editforms_getRepeaterId(a){jQuery.each(gfRepeater_repeaters,function(b,c){if(jQuery.inArray(a,this["childrenIds"])){return b}});return false}function gfRepeater_editforms_update(a){if(!gfRepeater_editforms_getRepeaters()){return}if(a){UpdateFormObject()}jQuery.each(gfRepeater_repeaters,function(f,g){var d=f;var c=gfRepeater_getField(this["startId"]);var e=[];var b=[];jQuery.each(this["children"],function(j,k){var h=gfRepeater_editforms_updateRequired(k,a);var i=gfRepeater_getId(k.id);if(h){b.push(i)}e.push(i)});c.repeaterRequiredChildren=b;c.repeaterChildren=e})}function gfRepeater_editforms_updateRequired(f,g){var a=gfRepeater_getId(f.id);var c=gfRepeater_getField(f.id);var b=c.isRequired;var e=c.repeaterField_isRequired;var d=false;if(gfRepeater_debug){console.log(f.id+" - Before Filter - isRequired:"+c.isRequired+" - repeaterField_isRequired:"+c.repeaterField_isRequired)}if(b&&g){c.isRequired=false;c.repeaterField_isRequired=true;if(gfRepeater_debug){console.log(f.id+" - Used Filter 1")}d=true}if(!b&&g){c.repeaterField_isRequired=false;if(gfRepeater_debug){console.log(f.id+" - Used Filter 2")}}if(e&&!g){jQuery(f).find(".gfield_required").html("*");c.isRequired=true;c.repeaterField_isRequired=false;if(gfRepeater_debug){console.log(f.id+" - Used Filter 3")}}if(!e&&!g){jQuery(f).find(".gfield_required").html("");c.isRequired=false;if(gfRepeater_debug){console.log(f.id+" - Used Filter 4")}}if(gfRepeater_debug){console.log(f.id+" - After Filter - isRequired:"+c.isRequired+" - repeaterField_isRequired:"+c.repeaterField_isRequired)}return d}function gfRepeater_editforms_updateUpdateButton(){var a=jQuery("#floatMenu input.update-form");var b=a.attr("onclick");var c="gfRepeater_editforms_update(true);";var d=c+b;a.attr("onclick",d)}jQuery(document).ready(function(a){if(gfRepeater_page=="gf_edit_forms"){gfRepeater_editforms_update(false);gfRepeater_editforms_updateUpdateButton()}});if(gfRepeater_debug){jQuery(window).keydown(function(a){if(a.which==38){console.log(gfRepeater_repeaters)}if(a.which==40){jQuery(".gfield").each(function(){console.log(gfRepeater_getField(this.id))})}})};