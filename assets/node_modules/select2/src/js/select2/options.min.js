define(["require","jquery","./defaults","./utils"],function(b,d,e,c){function a(h,f){this.options=h;if(f!=null){this.fromElement(f)}this.options=e.apply(this.options);if(f&&f.is("input")){var g=b(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=c.Decorate(this.options.dataAdapter,g)}}a.prototype.fromElement=function(f){var h=["select2"];if(this.options.multiple==null){this.options.multiple=f.prop("multiple")}if(this.options.disabled==null){this.options.disabled=f.prop("disabled")}if(this.options.language==null){if(f.prop("lang")){this.options.language=f.prop("lang").toLowerCase()}else{if(f.closest("[lang]").prop("lang")){this.options.language=f.closest("[lang]").prop("lang")}}}if(this.options.dir==null){if(f.prop("dir")){this.options.dir=f.prop("dir")}else{if(f.closest("[dir]").prop("dir")){this.options.dir=f.closest("[dir]").prop("dir")}else{this.options.dir="ltr"}}}f.prop("disabled",this.options.disabled);f.prop("multiple",this.options.multiple);if(f.data("select2Tags")){if(this.options.debug&&window.console&&console.warn){console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.')}f.data("data",f.data("select2Tags"));f.data("tags",true)}if(f.data("ajaxUrl")){if(this.options.debug&&window.console&&console.warn){console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2.")}f.attr("ajax--url",f.data("ajaxUrl"));f.data("ajax--url",f.data("ajaxUrl"))}var j={};if(d.fn.jquery&&d.fn.jquery.substr(0,2)=="1."&&f[0].dataset){j=d.extend(true,{},f[0].dataset,f.data())}else{j=f.data()}var i=d.extend(true,{},j);i=c._convertData(i);for(var g in i){if(d.inArray(g,h)>-1){continue}if(d.isPlainObject(this.options[g])){d.extend(this.options[g],i[g])}else{this.options[g]=i[g]}}return this};a.prototype.get=function(f){return this.options[f]};a.prototype.set=function(f,g){this.options[f]=g};return a});