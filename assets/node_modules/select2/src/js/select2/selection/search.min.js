define(["jquery","../utils","../keys"],function(d,c,a){function b(g,e,f){g.call(this,e,f)}b.prototype.render=function(f){var e=d('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" aria-autocomplete="list" /></li>');this.$searchContainer=e;this.$search=e.find("input");var g=f.call(this);this._transferTabIndex();return g};b.prototype.bind=function(i,f,j){var g=this;i.call(this,f,j);f.on("open",function(){g.$search.trigger("focus")});f.on("close",function(){g.$search.val("");g.$search.removeAttr("aria-activedescendant");g.$search.trigger("focus")});f.on("enable",function(){g.$search.prop("disabled",false);g._transferTabIndex()});f.on("disable",function(){g.$search.prop("disabled",true)});f.on("focus",function(k){g.$search.trigger("focus")});f.on("results:focus",function(k){g.$search.attr("aria-activedescendant",k.id)});this.$selection.on("focusin",".select2-search--inline",function(k){g.trigger("focus",k)});this.$selection.on("focusout",".select2-search--inline",function(k){g._handleBlur(k)});this.$selection.on("keydown",".select2-search--inline",function(k){k.stopPropagation();g.trigger("keypress",k);g._keyUpPrevented=k.isDefaultPrevented();var m=k.which;if(m===a.BACKSPACE&&g.$search.val()===""){var l=g.$searchContainer.prev(".select2-selection__choice");if(l.length>0){var n=l.data("data");g.searchRemoveChoice(n);k.preventDefault()}}});var h=document.documentMode;var e=h&&h<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(k){if(e){g.$selection.off("input.search input.searchcheck");return}g.$selection.off("keyup.search")});this.$selection.on("keyup.search input.search",".select2-search--inline",function(k){if(e&&k.type==="input"){g.$selection.off("input.search input.searchcheck");return}var l=k.which;if(l==a.SHIFT||l==a.CTRL||l==a.ALT){return}if(l==a.TAB){return}g.handleSearch(k)})};b.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex"));this.$selection.attr("tabindex","-1")};b.prototype.createPlaceholder=function(e,f){this.$search.attr("placeholder",f.text)};b.prototype.update=function(g,f){var e=this.$search[0]==document.activeElement;this.$search.attr("placeholder","");g.call(this,f);this.$selection.find(".select2-selection__rendered").append(this.$searchContainer);this.resizeSearch();if(e){this.$search.focus()}};b.prototype.handleSearch=function(){this.resizeSearch();if(!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=false};b.prototype.searchRemoveChoice=function(f,e){this.trigger("unselect",{data:e});this.$search.val(e.text);this.handleSearch()};b.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="";if(this.$search.attr("placeholder")!==""){e=this.$selection.find(".select2-selection__rendered").innerWidth()}else{var f=this.$search.val().length+1;e=(f*0.75)+"em"}this.$search.css("width",e)};return b});