define(["jquery"],function(b){function a(e,c,d,f){this.lastParams={};e.call(this,c,d,f);this.$loadingMore=this.createLoadingMore();this.loading=false}a.prototype.append=function(d,c){this.$loadingMore.remove();this.loading=false;d.call(this,c);if(this.showLoadingMore(c)){this.$results.append(this.$loadingMore)}};a.prototype.bind=function(e,c,f){var d=this;e.call(this,c,f);c.on("query",function(g){d.lastParams=g;d.loading=true});c.on("query:append",function(g){d.lastParams=g;d.loading=true});this.$results.on("scroll",function(){var i=b.contains(document.documentElement,d.$loadingMore[0]);if(d.loading||!i){return}var h=d.$results.offset().top+d.$results.outerHeight(false);var g=d.$loadingMore.offset().top+d.$loadingMore.outerHeight(false);if(h+50>=g){d.loadMore()}})};a.prototype.loadMore=function(){this.loading=true;var c=b.extend({},{page:1},this.lastParams);c.page++;this.trigger("query:append",c)};a.prototype.showLoadingMore=function(c,d){return d.pagination&&d.pagination.more};a.prototype.createLoadingMore=function(){var d=b('<li class="select2-results__option select2-results__option--load-more"role="treeitem" aria-disabled="true"></li>');var c=this.options.get("translations").get("loadingMore");d.html(c(this.lastParams));return d};return a});