define(["jquery","../utils"],function(c,b){function a(){}a.prototype.render=function(e){var f=e.call(this);var d=c('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');this.$searchContainer=d;this.$search=d.find("input");f.prepend(d);return f};a.prototype.bind=function(f,d,g){var e=this;f.call(this,d,g);this.$search.on("keydown",function(h){e.trigger("keypress",h);e._keyUpPrevented=h.isDefaultPrevented()});this.$search.on("input",function(h){c(this).off("keyup")});this.$search.on("keyup input",function(h){e.handleSearch(h)});d.on("open",function(){e.$search.attr("tabindex",0);e.$search.focus();window.setTimeout(function(){e.$search.focus()},0)});d.on("close",function(){e.$search.attr("tabindex",-1);e.$search.val("")});d.on("focus",function(){if(d.isOpen()){e.$search.focus()}});d.on("results:all",function(i){if(i.query.term==null||i.query.term===""){var h=e.showSearch(i);if(h){e.$searchContainer.removeClass("select2-search--hide")}else{e.$searchContainer.addClass("select2-search--hide")}}})};a.prototype.handleSearch=function(d){if(!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=false};a.prototype.showSearch=function(d,e){return true};return a});